

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using nbtlib &mdash; nbtlib 1.11.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../" class="icon icon-home" alt="Documentation Home"> nbtlib
          

          
          </a>

          
            
            
              <div class="version">
                1.11
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../files/">Loading and Editing Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tags/">Tags Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../paths/">NBT Paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="../snbt/">Stringified NBT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schemas/">NBT Schemas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/">Command-line Utility</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">nbtlib</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../" class="icon icon-home"></a> &raquo;</li>
        
      <li>Using nbtlib</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Usage.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="Using-nbtlib">
<h1>Using nbtlib<a class="headerlink" href="#Using-nbtlib" title="Permalink to this headline">¶</a></h1>
<p>The Named Binary Tag (NBT) file format is a simple structured binary format that is mainly used by the game Minecraft (see the <a class="reference external" href="http://wiki.vg/NBT">official specification</a> for more details). This short documentation will show you how you can manipulate nbt data using the <code class="docutils literal notranslate"><span class="pre">nbtlib</span></code> module.</p>
<div class="section" id="Loading-a-file">
<h2>Loading a file<a class="headerlink" href="#Loading-a-file" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">nbtlib</span>

<span class="n">nbt_file</span> <span class="o">=</span> <span class="n">nbtlib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;nbt_files/bigtest.nbt&#39;</span><span class="p">)</span>
<span class="n">nbt_file</span><span class="o">.</span><span class="n">root</span><span class="p">[</span><span class="s1">&#39;stringTest&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">FileNotFoundError</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-dbc805f48873&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-green-fg">import</span> nbtlib
<span class="ansi-green-intense-fg ansi-bold">      2</span>
<span class="ansi-green-fg">----&gt; 3</span><span class="ansi-red-fg"> </span>nbt_file <span class="ansi-blue-fg">=</span> nbtlib<span class="ansi-blue-fg">.</span>load<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/bigtest.nbt&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span> nbt_file<span class="ansi-blue-fg">.</span>root<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;stringTest&#39;</span><span class="ansi-blue-fg">]</span>

<span class="ansi-green-fg">~/projects/nbtlib/nbtlib/nbt.py</span> in <span class="ansi-cyan-fg">load</span><span class="ansi-blue-fg">(filename, gzipped, byteorder)</span>
<span class="ansi-green-intense-fg ansi-bold">    122</span>     <span class="ansi-red-fg"># Read the magic number otherwise and call `File.from_fileobj` with</span>
<span class="ansi-green-intense-fg ansi-bold">    123</span>     <span class="ansi-red-fg"># the appropriate file object</span>
<span class="ansi-green-fg">--&gt; 124</span><span class="ansi-red-fg">     </span><span class="ansi-green-fg">with</span> open<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;rb&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">as</span> fileobj<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    125</span>         magic_number <span class="ansi-blue-fg">=</span> fileobj<span class="ansi-blue-fg">.</span>read<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">2</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    126</span>         fileobj<span class="ansi-blue-fg">.</span>seek<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;nbt_files/bigtest.nbt&#39;
</pre></div></div>
</div>
<p>By default <code class="docutils literal notranslate"><span class="pre">nbtlib.load</span></code> will figure out by itself if the specified file is gzipped, but you can also use the <code class="docutils literal notranslate"><span class="pre">gzipped=</span></code> keyword only argument if you know in advance whether the file is gzipped or not.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">uncompressed_file</span> <span class="o">=</span> <span class="n">nbtlib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;nbt_files/hello_world.nbt&#39;</span><span class="p">,</span> <span class="n">gzipped</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">uncompressed_file</span><span class="o">.</span><span class="n">gzipped</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">FileNotFoundError</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-e63ac635df36&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>uncompressed_file <span class="ansi-blue-fg">=</span> nbtlib<span class="ansi-blue-fg">.</span>load<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/hello_world.nbt&#39;</span><span class="ansi-blue-fg">,</span> gzipped<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> uncompressed_file<span class="ansi-blue-fg">.</span>gzipped

<span class="ansi-green-fg">~/projects/nbtlib/nbtlib/nbt.py</span> in <span class="ansi-cyan-fg">load</span><span class="ansi-blue-fg">(filename, gzipped, byteorder)</span>
<span class="ansi-green-intense-fg ansi-bold">    118</span>     <span class="ansi-red-fg"># Delegate to `File.load` if the gzipped argument is set explicitly</span>
<span class="ansi-green-intense-fg ansi-bold">    119</span>     <span class="ansi-green-fg">if</span> gzipped <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">not</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 120</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> File<span class="ansi-blue-fg">.</span>load<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> gzipped<span class="ansi-blue-fg">,</span> byteorder<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    121</span>
<span class="ansi-green-intense-fg ansi-bold">    122</span>     <span class="ansi-red-fg"># Read the magic number otherwise and call `File.from_fileobj` with</span>

<span class="ansi-green-fg">~/projects/nbtlib/nbtlib/nbt.py</span> in <span class="ansi-cyan-fg">load</span><span class="ansi-blue-fg">(cls, filename, gzipped, byteorder)</span>
<span class="ansi-green-intense-fg ansi-bold">    313</span>         &#34;&#34;&#34;
<span class="ansi-green-intense-fg ansi-bold">    314</span>         open_file <span class="ansi-blue-fg">=</span> gzip<span class="ansi-blue-fg">.</span>open <span class="ansi-green-fg">if</span> gzipped <span class="ansi-green-fg">else</span> open
<span class="ansi-green-fg">--&gt; 315</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">with</span> open_file<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;rb&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">as</span> fileobj<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    316</span>             <span class="ansi-green-fg">return</span> cls<span class="ansi-blue-fg">.</span>from_fileobj<span class="ansi-blue-fg">(</span>fileobj<span class="ansi-blue-fg">,</span> byteorder<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    317</span>

<span class="ansi-red-fg">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;nbt_files/hello_world.nbt&#39;
</pre></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">nbtlib.load</span></code> function also accepts the <code class="docutils literal notranslate"><span class="pre">byteorder=</span></code> keyword only argument. It lets you specify whether the file is big-endian or little-endian. The default value is <code class="docutils literal notranslate"><span class="pre">'big'</span></code>, which means that the file is interpreted as big-endian by default. You can set it to <code class="docutils literal notranslate"><span class="pre">'little'</span></code> to use the little-endian format.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">little_endian_file</span> <span class="o">=</span> <span class="n">nbtlib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;nbt_files/hello_world_little.nbt&#39;</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;little&#39;</span><span class="p">)</span>
<span class="n">little_endian_file</span><span class="o">.</span><span class="n">byteorder</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">FileNotFoundError</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-51b36c330520&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>little_endian_file <span class="ansi-blue-fg">=</span> nbtlib<span class="ansi-blue-fg">.</span>load<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/hello_world_little.nbt&#39;</span><span class="ansi-blue-fg">,</span> byteorder<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;little&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> little_endian_file<span class="ansi-blue-fg">.</span>byteorder

<span class="ansi-green-fg">~/projects/nbtlib/nbtlib/nbt.py</span> in <span class="ansi-cyan-fg">load</span><span class="ansi-blue-fg">(filename, gzipped, byteorder)</span>
<span class="ansi-green-intense-fg ansi-bold">    122</span>     <span class="ansi-red-fg"># Read the magic number otherwise and call `File.from_fileobj` with</span>
<span class="ansi-green-intense-fg ansi-bold">    123</span>     <span class="ansi-red-fg"># the appropriate file object</span>
<span class="ansi-green-fg">--&gt; 124</span><span class="ansi-red-fg">     </span><span class="ansi-green-fg">with</span> open<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;rb&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">as</span> fileobj<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    125</span>         magic_number <span class="ansi-blue-fg">=</span> fileobj<span class="ansi-blue-fg">.</span>read<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">2</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    126</span>         fileobj<span class="ansi-blue-fg">.</span>seek<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;nbt_files/hello_world_little.nbt&#39;
</pre></div></div>
</div>
<p>Objects returned by the <code class="docutils literal notranslate"><span class="pre">nbtlib.load</span></code> function are instances of the <code class="docutils literal notranslate"><span class="pre">nbtlib.File</span></code> class. The <code class="docutils literal notranslate"><span class="pre">nbtlib.load</span></code> function is actually a small helper around the <code class="docutils literal notranslate"><span class="pre">File.load</span></code> classmethod. If you need to load files from an already opened file-like object, you can use the <code class="docutils literal notranslate"><span class="pre">File.parse</span></code> class method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">nbtlib</span> <span class="kn">import</span> <span class="n">File</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;nbt_files/hello_world.nbt&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">hello_world</span> <span class="o">=</span> <span class="n">File</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">hello_world</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">FileNotFoundError</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-4751ea376d78&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-green-fg">from</span> nbtlib <span class="ansi-green-fg">import</span> File
<span class="ansi-green-intense-fg ansi-bold">      2</span>
<span class="ansi-green-fg">----&gt; 3</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">with</span> open<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/hello_world.nbt&#39;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;rb&#39;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">as</span> f<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span>     hello_world <span class="ansi-blue-fg">=</span> File<span class="ansi-blue-fg">.</span>parse<span class="ansi-blue-fg">(</span>f<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span> hello_world

<span class="ansi-red-fg">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;nbt_files/hello_world.nbt&#39;
</pre></div></div>
</div>
</div>
<div class="section" id="Accessing-file-data">
<h2>Accessing file data<a class="headerlink" href="#Accessing-file-data" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">File</span></code> class inherits from <code class="docutils literal notranslate"><span class="pre">Compound</span></code>, which inherits from <code class="docutils literal notranslate"><span class="pre">dict</span></code>. This means that you can use standard <code class="docutils literal notranslate"><span class="pre">dict</span></code> operations to access data inside of the file. As most files usually contain a single root tag, there is a shorthand to access it directly.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">nbt_file</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-f10bc4d0f9d7&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>nbt_file<span class="ansi-blue-fg">.</span>keys<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">NameError</span>: name &#39;nbt_file&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">nbt_file</span><span class="o">.</span><span class="n">root</span> <span class="o">==</span> <span class="n">nbt_file</span><span class="p">[</span><span class="s1">&#39;Level&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-cd7d186511e8&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>nbt_file<span class="ansi-blue-fg">.</span>root <span class="ansi-blue-fg">==</span> nbt_file<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;Level&#39;</span><span class="ansi-blue-fg">]</span>

<span class="ansi-red-fg">NameError</span>: name &#39;nbt_file&#39; is not defined
</pre></div></div>
</div>
</div>
<div class="section" id="Modifying-files">
<h2>Modifying files<a class="headerlink" href="#Modifying-files" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">nbtlib.tag</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">with</span> <span class="n">nbtlib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;nbt_files/demo.nbt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">demo</span><span class="p">:</span>
    <span class="n">demo</span><span class="o">.</span><span class="n">root</span><span class="p">[</span><span class="s1">&#39;counter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Int</span><span class="p">(</span><span class="n">demo</span><span class="o">.</span><span class="n">root</span><span class="p">[</span><span class="s1">&#39;counter&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">demo</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">FileNotFoundError</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-4d3af0e0a269&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-green-fg">from</span> nbtlib<span class="ansi-blue-fg">.</span>tag <span class="ansi-green-fg">import</span> <span class="ansi-blue-fg">*</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span>
<span class="ansi-green-fg">----&gt; 3</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">with</span> nbtlib<span class="ansi-blue-fg">.</span>load<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/demo.nbt&#39;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">as</span> demo<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span>     demo<span class="ansi-blue-fg">.</span>root<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;counter&#39;</span><span class="ansi-blue-fg">]</span> <span class="ansi-blue-fg">=</span> Int<span class="ansi-blue-fg">(</span>demo<span class="ansi-blue-fg">.</span>root<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;counter&#39;</span><span class="ansi-blue-fg">]</span> <span class="ansi-blue-fg">+</span> <span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span> demo

<span class="ansi-green-fg">~/projects/nbtlib/nbtlib/nbt.py</span> in <span class="ansi-cyan-fg">load</span><span class="ansi-blue-fg">(filename, gzipped, byteorder)</span>
<span class="ansi-green-intense-fg ansi-bold">    122</span>     <span class="ansi-red-fg"># Read the magic number otherwise and call `File.from_fileobj` with</span>
<span class="ansi-green-intense-fg ansi-bold">    123</span>     <span class="ansi-red-fg"># the appropriate file object</span>
<span class="ansi-green-fg">--&gt; 124</span><span class="ansi-red-fg">     </span><span class="ansi-green-fg">with</span> open<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;rb&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">as</span> fileobj<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    125</span>         magic_number <span class="ansi-blue-fg">=</span> fileobj<span class="ansi-blue-fg">.</span>read<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">2</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    126</span>         fileobj<span class="ansi-blue-fg">.</span>seek<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;nbt_files/demo.nbt&#39;
</pre></div></div>
</div>
<p>If you don’t want to use a context manager, you can call the <code class="docutils literal notranslate"><span class="pre">.save</span></code> method manually to overwrite the original file or make a copy by specifying a different path. The <code class="docutils literal notranslate"><span class="pre">.save</span></code> method also accepts the <code class="docutils literal notranslate"><span class="pre">gzipped=</span></code> keyword only argument. By default, the copy will be gzipped if the original file is gzipped. Similarly, you can use the <code class="docutils literal notranslate"><span class="pre">byteorder=</span></code> keyword only argument to specify whether the file should be saved using the big-endian or little-endian format. By default, the copy will be saved
using the same format as the original file.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">demo</span> <span class="o">=</span> <span class="n">nbtlib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;nbt_files/demo.nbt&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">demo</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  <span class="c1"># overwrite</span>
<span class="n">demo</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;nbt_files/demo_copy.nbt&#39;</span><span class="p">,</span> <span class="n">gzipped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># make a gzipped copy</span>
<span class="n">demo</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;nbt_files/demo_little.nbt&#39;</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;little&#39;</span><span class="p">)</span>  <span class="c1"># convert the file to little-endian</span>

<span class="n">nbtlib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;nbt_files/demo_copy.nbt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">root</span><span class="p">[</span><span class="s1">&#39;counter&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">FileNotFoundError</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-dad69483d271&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>demo <span class="ansi-blue-fg">=</span> nbtlib<span class="ansi-blue-fg">.</span>load<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/demo.nbt&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span> demo<span class="ansi-blue-fg">.</span>save<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>  <span class="ansi-red-fg"># overwrite</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span> demo<span class="ansi-blue-fg">.</span>save<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/demo_copy.nbt&#39;</span><span class="ansi-blue-fg">,</span> gzipped<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">)</span>  <span class="ansi-red-fg"># make a gzipped copy</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span> demo<span class="ansi-blue-fg">.</span>save<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/demo_little.nbt&#39;</span><span class="ansi-blue-fg">,</span> byteorder<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;little&#39;</span><span class="ansi-blue-fg">)</span>  <span class="ansi-red-fg"># convert the file to little-endian</span>

<span class="ansi-green-fg">~/projects/nbtlib/nbtlib/nbt.py</span> in <span class="ansi-cyan-fg">load</span><span class="ansi-blue-fg">(filename, gzipped, byteorder)</span>
<span class="ansi-green-intense-fg ansi-bold">    122</span>     <span class="ansi-red-fg"># Read the magic number otherwise and call `File.from_fileobj` with</span>
<span class="ansi-green-intense-fg ansi-bold">    123</span>     <span class="ansi-red-fg"># the appropriate file object</span>
<span class="ansi-green-fg">--&gt; 124</span><span class="ansi-red-fg">     </span><span class="ansi-green-fg">with</span> open<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;rb&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">as</span> fileobj<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    125</span>         magic_number <span class="ansi-blue-fg">=</span> fileobj<span class="ansi-blue-fg">.</span>read<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">2</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    126</span>         fileobj<span class="ansi-blue-fg">.</span>seek<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;nbt_files/demo.nbt&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">nbtlib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;nbt_files/demo_little.nbt&#39;</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;little&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">root</span><span class="p">[</span><span class="s1">&#39;counter&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">FileNotFoundError</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-871979dfeb91&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>nbtlib<span class="ansi-blue-fg">.</span>load<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/demo_little.nbt&#39;</span><span class="ansi-blue-fg">,</span> byteorder<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;little&#39;</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>root<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;counter&#39;</span><span class="ansi-blue-fg">]</span>

<span class="ansi-green-fg">~/projects/nbtlib/nbtlib/nbt.py</span> in <span class="ansi-cyan-fg">load</span><span class="ansi-blue-fg">(filename, gzipped, byteorder)</span>
<span class="ansi-green-intense-fg ansi-bold">    122</span>     <span class="ansi-red-fg"># Read the magic number otherwise and call `File.from_fileobj` with</span>
<span class="ansi-green-intense-fg ansi-bold">    123</span>     <span class="ansi-red-fg"># the appropriate file object</span>
<span class="ansi-green-fg">--&gt; 124</span><span class="ansi-red-fg">     </span><span class="ansi-green-fg">with</span> open<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;rb&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">as</span> fileobj<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    125</span>         magic_number <span class="ansi-blue-fg">=</span> fileobj<span class="ansi-blue-fg">.</span>read<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">2</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    126</span>         fileobj<span class="ansi-blue-fg">.</span>seek<span class="ansi-blue-fg">(</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;nbt_files/demo_little.nbt&#39;
</pre></div></div>
</div>
<p>You can also write nbt data to an already opened file-like object using the <code class="docutils literal notranslate"><span class="pre">.write</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;nbt_files/demo_copy.nbt&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">demo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">FileNotFoundError</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-324a3b6965ef&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">with</span> open<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/demo_copy.nbt&#39;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;wb&#39;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">as</span> f<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span>     demo<span class="ansi-blue-fg">.</span>write<span class="ansi-blue-fg">(</span>f<span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;nbt_files/demo_copy.nbt&#39;
</pre></div></div>
</div>
</div>
<div class="section" id="Creating-files">
<h2>Creating files<a class="headerlink" href="#Creating-files" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">new_file</span> <span class="o">=</span> <span class="n">File</span><span class="p">({</span>
    <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="n">Compound</span><span class="p">({</span>
        <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">),</span>
        <span class="s1">&#39;spam&#39;</span><span class="p">:</span> <span class="n">IntArray</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span>
        <span class="s1">&#39;egg&#39;</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">String</span><span class="p">]([</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">])</span>
    <span class="p">})</span>
<span class="p">})</span>
<span class="n">new_file</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;nbt_files/new_file.nbt&#39;</span><span class="p">)</span>

<span class="n">loaded_file</span> <span class="o">=</span> <span class="n">nbtlib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;nbt_files/new_file.nbt&#39;</span><span class="p">)</span>
<span class="n">loaded_file</span><span class="o">.</span><span class="n">gzipped</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">FileNotFoundError</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-a410f9d52e09&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      6</span>     })
<span class="ansi-green-intense-fg ansi-bold">      7</span> })
<span class="ansi-green-fg">----&gt; 8</span><span class="ansi-red-fg"> </span>new_file<span class="ansi-blue-fg">.</span>save<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/new_file.nbt&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      9</span>
<span class="ansi-green-intense-fg ansi-bold">     10</span> loaded_file <span class="ansi-blue-fg">=</span> nbtlib<span class="ansi-blue-fg">.</span>load<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/new_file.nbt&#39;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/projects/nbtlib/nbtlib/nbt.py</span> in <span class="ansi-cyan-fg">save</span><span class="ansi-blue-fg">(self, filename, gzipped, byteorder)</span>
<span class="ansi-green-intense-fg ansi-bold">    344</span>
<span class="ansi-green-intense-fg ansi-bold">    345</span>         open_file <span class="ansi-blue-fg">=</span> gzip<span class="ansi-blue-fg">.</span>open <span class="ansi-green-fg">if</span> gzipped <span class="ansi-green-fg">else</span> open
<span class="ansi-green-fg">--&gt; 346</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">with</span> open_file<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;wb&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">as</span> fileobj<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    347</span>             self<span class="ansi-blue-fg">.</span>write<span class="ansi-blue-fg">(</span>fileobj<span class="ansi-blue-fg">,</span> byteorder <span class="ansi-green-fg">or</span> self<span class="ansi-blue-fg">.</span>byteorder<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    348</span>

<span class="ansi-red-fg">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;nbt_files/new_file.nbt&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">loaded_file</span><span class="o">.</span><span class="n">byteorder</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-2f605ebca020&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>loaded_file<span class="ansi-blue-fg">.</span>byteorder

<span class="ansi-red-fg">NameError</span>: name &#39;loaded_file&#39; is not defined
</pre></div></div>
</div>
<p>New files are uncompressed by default. You can use the <code class="docutils literal notranslate"><span class="pre">gzipped=</span></code> keyword only argument to create a gzipped file. New files are also big-endian by default. You can use the <code class="docutils literal notranslate"><span class="pre">byteorder=</span></code> keyword only argument to set the endianness of the file to either <code class="docutils literal notranslate"><span class="pre">'big'</span></code> or <code class="docutils literal notranslate"><span class="pre">'little'</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">new_file</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span>
    <span class="p">{</span><span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="n">Compound</span><span class="p">({</span><span class="s1">&#39;thing&#39;</span><span class="p">:</span> <span class="n">LongArray</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])})},</span>
    <span class="n">gzipped</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;little&#39;</span>
<span class="p">)</span>
<span class="n">new_file</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;nbt_files/new_file_gzipped_little.nbt&#39;</span><span class="p">)</span>

<span class="n">loaded_file</span> <span class="o">=</span> <span class="n">nbtlib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;nbt_files/new_file_gzipped_little.nbt&#39;</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;little&#39;</span><span class="p">)</span>
<span class="n">loaded_file</span><span class="o">.</span><span class="n">gzipped</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">FileNotFoundError</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-59f0243ec912&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span>     byteorder<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;little&#39;</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span> )
<span class="ansi-green-fg">----&gt; 6</span><span class="ansi-red-fg"> </span>new_file<span class="ansi-blue-fg">.</span>save<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/new_file_gzipped_little.nbt&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      7</span>
<span class="ansi-green-intense-fg ansi-bold">      8</span> loaded_file <span class="ansi-blue-fg">=</span> nbtlib<span class="ansi-blue-fg">.</span>load<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/new_file_gzipped_little.nbt&#39;</span><span class="ansi-blue-fg">,</span> byteorder<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;little&#39;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/projects/nbtlib/nbtlib/nbt.py</span> in <span class="ansi-cyan-fg">save</span><span class="ansi-blue-fg">(self, filename, gzipped, byteorder)</span>
<span class="ansi-green-intense-fg ansi-bold">    344</span>
<span class="ansi-green-intense-fg ansi-bold">    345</span>         open_file <span class="ansi-blue-fg">=</span> gzip<span class="ansi-blue-fg">.</span>open <span class="ansi-green-fg">if</span> gzipped <span class="ansi-green-fg">else</span> open
<span class="ansi-green-fg">--&gt; 346</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">with</span> open_file<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;wb&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">as</span> fileobj<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    347</span>             self<span class="ansi-blue-fg">.</span>write<span class="ansi-blue-fg">(</span>fileobj<span class="ansi-blue-fg">,</span> byteorder <span class="ansi-green-fg">or</span> self<span class="ansi-blue-fg">.</span>byteorder<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    348</span>

<span class="ansi-green-fg">/usr/lib/python3.8/gzip.py</span> in <span class="ansi-cyan-fg">open</span><span class="ansi-blue-fg">(filename, mode, compresslevel, encoding, errors, newline)</span>
<span class="ansi-green-intense-fg ansi-bold">     56</span>     gz_mode <span class="ansi-blue-fg">=</span> mode<span class="ansi-blue-fg">.</span>replace<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;t&#34;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;&#34;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     57</span>     <span class="ansi-green-fg">if</span> isinstance<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">(</span>str<span class="ansi-blue-fg">,</span> bytes<span class="ansi-blue-fg">,</span> os<span class="ansi-blue-fg">.</span>PathLike<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 58</span><span class="ansi-red-fg">         </span>binary_file <span class="ansi-blue-fg">=</span> GzipFile<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> gz_mode<span class="ansi-blue-fg">,</span> compresslevel<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     59</span>     <span class="ansi-green-fg">elif</span> hasattr<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;read&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">or</span> hasattr<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;write&#34;</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     60</span>         binary_file <span class="ansi-blue-fg">=</span> GzipFile<span class="ansi-blue-fg">(</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> gz_mode<span class="ansi-blue-fg">,</span> compresslevel<span class="ansi-blue-fg">,</span> filename<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">/usr/lib/python3.8/gzip.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-fg">(self, filename, mode, compresslevel, fileobj, mtime)</span>
<span class="ansi-green-intense-fg ansi-bold">    171</span>             mode <span class="ansi-blue-fg">+=</span> <span class="ansi-blue-fg">&#39;b&#39;</span>
<span class="ansi-green-intense-fg ansi-bold">    172</span>         <span class="ansi-green-fg">if</span> fileobj <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 173</span><span class="ansi-red-fg">             </span>fileobj <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>myfileobj <span class="ansi-blue-fg">=</span> builtins<span class="ansi-blue-fg">.</span>open<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> mode <span class="ansi-green-fg">or</span> <span class="ansi-blue-fg">&#39;rb&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    174</span>         <span class="ansi-green-fg">if</span> filename <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    175</span>             filename <span class="ansi-blue-fg">=</span> getattr<span class="ansi-blue-fg">(</span>fileobj<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;name&#39;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;&#39;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;nbt_files/new_file_gzipped_little.nbt&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">loaded_file</span><span class="o">.</span><span class="n">byteorder</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-2f605ebca020&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>loaded_file<span class="ansi-blue-fg">.</span>byteorder

<span class="ansi-red-fg">NameError</span>: name &#39;loaded_file&#39; is not defined
</pre></div></div>
</div>
</div>
<div class="section" id="Performing-operations-on-tags">
<h2>Performing operations on tags<a class="headerlink" href="#Performing-operations-on-tags" title="Permalink to this headline">¶</a></h2>
<p>With the exception of <code class="docutils literal notranslate"><span class="pre">ByteArray</span></code>, <code class="docutils literal notranslate"><span class="pre">IntArray</span></code> and <code class="docutils literal notranslate"><span class="pre">LongArray</span></code> tags, every tag type inherits from a python builtin, allowing you to make use of their rich and familiar interfaces. <code class="docutils literal notranslate"><span class="pre">ByteArray</span></code>, <code class="docutils literal notranslate"><span class="pre">IntArray</span></code> and <code class="docutils literal notranslate"><span class="pre">LongArray</span></code> tags on the other hand, inherit from <code class="docutils literal notranslate"><span class="pre">numpy</span></code> arrays instead of the builtin <code class="docutils literal notranslate"><span class="pre">array</span></code> type in order to benefit from <code class="docutils literal notranslate"><span class="pre">numpy</span></code>’s efficiency.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Base type</p></th>
<th class="head"><p>Associated nbt tags</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>int</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Byte</span></code>, <code class="docutils literal notranslate"><span class="pre">Short</span></code>, <code class="docutils literal notranslate"><span class="pre">Int</span></code>, <code class="docutils literal notranslate"><span class="pre">Long</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>float</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Float</span></code>, <code class="docutils literal notranslate"><span class="pre">Double</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>str</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">String</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>numpy.ndarray</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ByteArray</span></code>, <code class="docutils literal notranslate"><span class="pre">IntArray</span></code>, <code class="docutils literal notranslate"><span class="pre">LongArray</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>list</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">List</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>dict</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Compound</span></code></p></td>
</tr>
</tbody>
</table>
<p>All the methods and operations that are usually available on the the base types can be used on the associated tags.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">my_list</span> <span class="o">=</span> <span class="n">List</span><span class="p">[</span><span class="n">String</span><span class="p">](</span><span class="n">char</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="n">my_list</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[String(&#39;E&#39;), String(&#39;H&#39;)]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">my_array</span> <span class="o">=</span> <span class="n">IntArray</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">my_array</span> <span class="o">+</span> <span class="mi">100</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
IntArray([Int(101), Int(102), Int(103)])
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">my_pizza</span> <span class="o">=</span> <span class="n">Compound</span><span class="p">({</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="s1">&#39;Margherita&#39;</span><span class="p">),</span>
    <span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="n">Double</span><span class="p">(</span><span class="mf">5.7</span><span class="p">),</span>
    <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="s1">&#39;medium&#39;</span><span class="p">)</span>
<span class="p">})</span>

<span class="n">my_pizza</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="s1">&#39;Calzone&#39;</span><span class="p">),</span> <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="s1">&#39;large&#39;</span><span class="p">)})</span>
<span class="n">my_pizza</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Double</span><span class="p">(</span><span class="n">my_pizza</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mf">2.5</span><span class="p">)</span>
<span class="n">my_pizza</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Compound({&#39;name&#39;: String(&#39;Calzone&#39;), &#39;price&#39;: Double(8.2), &#39;size&#39;: String(&#39;large&#39;)})
</pre></div></div>
</div>
</div>
<div class="section" id="Serializing-nbt-tags-to-snbt">
<h2>Serializing nbt tags to snbt<a class="headerlink" href="#Serializing-nbt-tags-to-snbt" title="Permalink to this headline">¶</a></h2>
<p>While using <code class="docutils literal notranslate"><span class="pre">repr()</span></code> on nbt tags outputs a python representation of the tag, calling <code class="docutils literal notranslate"><span class="pre">str()</span></code> on nbt tags (or simply printing them) will return the nbt literal representing that tag.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">example_tag</span> <span class="o">=</span> <span class="n">Compound</span><span class="p">({</span>
    <span class="s1">&#39;numbers&#39;</span><span class="p">:</span> <span class="n">IntArray</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span>
    <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">),</span>
    <span class="s1">&#39;syntax breaking&#39;</span><span class="p">:</span> <span class="n">Float</span><span class="p">(</span><span class="mi">42</span><span class="p">),</span>
    <span class="s1">&#39;spam&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="s1">&#39;{&quot;text&quot;:&quot;Hello, world!</span><span class="se">\\</span><span class="s1">n&quot;}&#39;</span><span class="p">)</span>
<span class="p">})</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">example_tag</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Compound({&#39;numbers&#39;: IntArray([Int(1), Int(2), Int(3)]), &#39;foo&#39;: String(&#39;bar&#39;), &#39;syntax breaking&#39;: Float(42.0), &#39;spam&#39;: String(&#39;{&#34;text&#34;:&#34;Hello, world!\\n&#34;}&#39;)})
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">example_tag</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Compound({&#39;numbers&#39;: IntArray([Int(1), Int(2), Int(3)]), &#39;foo&#39;: String(&#39;bar&#39;), &#39;syntax breaking&#39;: Float(42.0), &#39;spam&#39;: String(&#39;{&#34;text&#34;:&#34;Hello, world!\\n&#34;}&#39;)})
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">example_tag</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Compound({&#39;numbers&#39;: IntArray([Int(1), Int(2), Int(3)]), &#39;foo&#39;: String(&#39;bar&#39;), &#39;syntax breaking&#39;: Float(42.0), &#39;spam&#39;: String(&#39;{&#34;text&#34;:&#34;Hello, world!\\n&#34;}&#39;)})
</pre></div></div>
</div>
<p>Converting nbt tags to strings will serialize them to snbt. If you want more control over the way nbt tags are serialized, you can use the <code class="docutils literal notranslate"><span class="pre">nbtlib.serialize_tag</span></code> function. In fact, using <code class="docutils literal notranslate"><span class="pre">str</span></code> on nbt tags simply calls <code class="docutils literal notranslate"><span class="pre">nbtlib.serialize_tag</span></code> on the specified tag.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">nbtlib</span> <span class="kn">import</span> <span class="n">serialize_tag</span>

<span class="nb">print</span><span class="p">(</span><span class="n">serialize_tag</span><span class="p">(</span><span class="n">example_tag</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{numbers: [I; 1, 2, 3], foo: &#34;bar&#34;, &#34;syntax breaking&#34;: 42.0f, spam: &#39;{&#34;text&#34;:&#34;Hello, world!\\n&#34;}&#39;}
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">serialize_tag</span><span class="p">(</span><span class="n">example_tag</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="n">example_tag</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
False
</pre></div></div>
</div>
<p>You might have noticed that by default, the <code class="docutils literal notranslate"><span class="pre">nbtlib.serialize_tag</span></code> function will render strings with single <code class="docutils literal notranslate"><span class="pre">'</span></code> or double <code class="docutils literal notranslate"><span class="pre">&quot;</span></code> quotes based on their content to avoid escaping quoting characters. The string is serialized such that the type of quotes used is different from the first quoting character found in the string. If the string doesn’t contain any quoting character, the <code class="docutils literal notranslate"><span class="pre">nbtlib.serialize_tag</span></code> function will render the string as a double <code class="docutils literal notranslate"><span class="pre">&quot;</span></code> quoted string.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="s2">&quot;contains &#39;single&#39; quotes&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
contains &#39;single&#39; quotes
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="s1">&#39;contains &quot;double&quot; quotes&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
contains &#34;double&#34; quotes
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;contains &#39;single&#39; and &quot;double&quot; quotes&#39;&#39;&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
contains &#39;single&#39; and &#34;double&#34; quotes
</pre></div></div>
</div>
<p>You can overwrite this behavior by setting the <code class="docutils literal notranslate"><span class="pre">quote=</span></code> keyword only argument to either a single <code class="docutils literal notranslate"><span class="pre">'</span></code> or a double <code class="docutils literal notranslate"><span class="pre">&quot;</span></code> quote.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">serialize_tag</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="s1">&#39;forcing &quot;double&quot; quotes&#39;</span><span class="p">),</span> <span class="n">quote</span><span class="o">=</span><span class="s1">&#39;&quot;&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#34;forcing \&#34;double\&#34; quotes&#34;
</pre></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">nbtlib.serialize_tag</span></code> function can be used with the <code class="docutils literal notranslate"><span class="pre">compact=</span></code> keyword only argument to remove all the extra whitespace from the output.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">serialize_tag</span><span class="p">(</span><span class="n">example_tag</span><span class="p">,</span> <span class="n">compact</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{numbers:[I;1,2,3],foo:&#34;bar&#34;,&#34;syntax breaking&#34;:42.0f,spam:&#39;{&#34;text&#34;:&#34;Hello, world!\\n&#34;}&#39;}
</pre></div></div>
</div>
<p>If you’d rather have something a bit more readable, you can use the <code class="docutils literal notranslate"><span class="pre">indent=</span></code> keyword only argument to tell the <code class="docutils literal notranslate"><span class="pre">nbtlib.serialize_tag</span></code> function to output indented snbt. The argument can be either a string or an integer and will be used to define how to render each indentation level.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">nested_tag</span> <span class="o">=</span> <span class="n">Compound</span><span class="p">({</span>
    <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Int</span><span class="p">]([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]),</span>
    <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">),</span>
    <span class="s1">&#39;values&#39;</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Compound</span><span class="p">]([</span>
        <span class="p">{</span><span class="s1">&#39;test&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="s1">&#39;thing&#39;</span><span class="p">:</span> <span class="n">ByteArray</span><span class="p">([</span><span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">])},</span>
        <span class="p">{</span><span class="s1">&#39;test&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="s1">&#39;thing&#39;</span><span class="p">:</span> <span class="n">ByteArray</span><span class="p">([</span><span class="mi">64</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">64</span><span class="p">])}</span>
    <span class="p">])</span>
<span class="p">})</span>

<span class="nb">print</span><span class="p">(</span><span class="n">serialize_tag</span><span class="p">(</span><span class="n">nested_tag</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{
    foo: [1, 2, 3],
    bar: &#34;name&#34;,
    values: [
        {
            test: &#34;a&#34;,
            thing: [B; 32B, 32B, 32B]
        },
        {
            test: &#34;b&#34;,
            thing: [B; 64B, 64B, 64B]
        }
    ]
}
</pre></div></div>
</div>
<p>If you need the output ot be indented with tabs instead, you can set the <code class="docutils literal notranslate"><span class="pre">indent=</span></code> argument to <code class="docutils literal notranslate"><span class="pre">'\t'</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">serialize_tag</span><span class="p">(</span><span class="n">nested_tag</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{
        foo: [1, 2, 3],
        bar: &#34;name&#34;,
        values: [
                {
                        test: &#34;a&#34;,
                        thing: [B; 32B, 32B, 32B]
                },
                {
                        test: &#34;b&#34;,
                        thing: [B; 64B, 64B, 64B]
                }
        ]
}
</pre></div></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">indent=</span></code> keyword only argument can be set to any string, not just <code class="docutils literal notranslate"><span class="pre">'\t'</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">serialize_tag</span><span class="p">(</span><span class="n">nested_tag</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="s1">&#39;.   &#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{
.   foo: [1, 2, 3],
.   bar: &#34;name&#34;,
.   values: [
.   .   {
.   .   .   test: &#34;a&#34;,
.   .   .   thing: [B; 32B, 32B, 32B]
.   .   },
.   .   {
.   .   .   test: &#34;b&#34;,
.   .   .   thing: [B; 64B, 64B, 64B]
.   .   }
.   ]
}
</pre></div></div>
</div>
</div>
<div class="section" id="Creating-tags-from-nbt-literals">
<h2>Creating tags from nbt literals<a class="headerlink" href="#Creating-tags-from-nbt-literals" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">nbtlib</span></code> supports creating nbt tags from their literal representation. The <code class="docutils literal notranslate"><span class="pre">nbtlib.parse_nbt</span></code> function can parse snbt and return the appropriate tag.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">nbtlib</span> <span class="kn">import</span> <span class="n">parse_nbt</span>

<span class="n">parse_nbt</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
String(&#39;hello&#39;)
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">parse_nbt</span><span class="p">(</span><span class="s1">&#39;{foo:[{bar:[I;1,2,3]},</span><span class="si">{spam:6.7f}</span><span class="s1">]}&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Compound({&#39;foo&#39;: List[Compound]([Compound({&#39;bar&#39;: IntArray([Int(1), Int(2), Int(3)])}), Compound({&#39;spam&#39;: Float(6.7)})])})
</pre></div></div>
</div>
<p>Note that the parser ignores whitespace.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">parse_nbt</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;{</span>
<span class="s2">    foo: [1, 2, 3],</span>
<span class="s2">    bar: &quot;name&quot;,</span>
<span class="s2">    values: [</span>
<span class="s2">        {</span>
<span class="s2">            test: &quot;a&quot;,</span>
<span class="s2">            thing: [B; 32B, 32B, 32B]</span>
<span class="s2">        },</span>
<span class="s2">        {</span>
<span class="s2">            test: &quot;b&quot;,</span>
<span class="s2">            thing: [B; 64B, 64B, 64B]</span>
<span class="s2">        }</span>
<span class="s2">    ]</span>
<span class="s2">}&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Compound({&#39;foo&#39;: List[Int]([Int(1), Int(2), Int(3)]), &#39;bar&#39;: String(&#39;name&#39;), &#39;values&#39;: List[Compound]([Compound({&#39;test&#39;: String(&#39;a&#39;), &#39;thing&#39;: ByteArray([Byte(32), Byte(32), Byte(32)])}), Compound({&#39;test&#39;: String(&#39;b&#39;), &#39;thing&#39;: ByteArray([Byte(64), Byte(64), Byte(64)])})])})
</pre></div></div>
</div>
</div>
<div class="section" id="Defining-schemas">
<h2>Defining schemas<a class="headerlink" href="#Defining-schemas" title="Permalink to this headline">¶</a></h2>
<p>In order to avoid wrapping values manually every time you edit a compound tag, you can define a schema that will take care of converting python types to predefined nbt tags automatically.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">nbtlib</span> <span class="kn">import</span> <span class="n">schema</span>

<span class="n">MySchema</span> <span class="o">=</span> <span class="n">schema</span><span class="p">(</span><span class="s1">&#39;MySchema&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
    <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="n">Short</span>
<span class="p">})</span>

<span class="n">my_object</span> <span class="o">=</span> <span class="n">MySchema</span><span class="p">({</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;hello world&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="mi">21</span><span class="p">})</span>
<span class="n">my_object</span><span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">]</span> <span class="o">*=</span> <span class="mi">2</span>
<span class="n">my_object</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MySchema({&#39;foo&#39;: String(&#39;hello world&#39;), &#39;bar&#39;: Short(42)})
</pre></div></div>
</div>
<p>By default, you can interact with keys that are not defined in the schema. However, if you use the <code class="docutils literal notranslate"><span class="pre">strict=</span></code> keyword only argument, the schema instance will raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> whenever you try to access a key that wasn’t defined in the original schema.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">MyStrictSchema</span> <span class="o">=</span> <span class="n">schema</span><span class="p">(</span><span class="s1">&#39;MyStrictSchema&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
    <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="n">Short</span>
<span class="p">},</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">strict_instance</span> <span class="o">=</span> <span class="n">MyStrictSchema</span><span class="p">()</span>
<span class="n">strict_instance</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;hello world&#39;</span><span class="p">})</span>
<span class="n">strict_instance</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MyStrictSchema({&#39;foo&#39;: String(&#39;hello world&#39;)})
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">strict_instance</span><span class="p">[</span><span class="s1">&#39;something&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">List</span><span class="p">[</span><span class="n">String</span><span class="p">]([</span><span class="s1">&#39;this&#39;</span><span class="p">,</span> <span class="s1">&#39;raises&#39;</span><span class="p">,</span> <span class="s1">&#39;an&#39;</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">])</span>
<span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Invalid key &#39;something&#39;
</pre></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">schema</span></code> function is a helper that creates a class that inherits from <code class="docutils literal notranslate"><span class="pre">CompoundSchema</span></code>. This means that you can also inherit from the class manually.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">nbtlib</span> <span class="kn">import</span> <span class="n">CompoundSchema</span>

<span class="k">class</span> <span class="nc">MySchema</span><span class="p">(</span><span class="n">CompoundSchema</span><span class="p">):</span>
    <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
        <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="n">Short</span>
    <span class="p">}</span>

<span class="n">MySchema</span><span class="p">({</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;hello world&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MySchema({&#39;foo&#39;: String(&#39;hello world&#39;), &#39;bar&#39;: Short(42)})
</pre></div></div>
</div>
<p>You can also set the <code class="docutils literal notranslate"><span class="pre">strict</span></code> class attribute to <code class="docutils literal notranslate"><span class="pre">True</span></code> to create a strict schema type.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">class</span> <span class="nc">MyStrictSchema</span><span class="p">(</span><span class="n">CompoundSchema</span><span class="p">):</span>
    <span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
        <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="n">Short</span>
    <span class="p">}</span>
    <span class="n">strict</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">MyStrictSchema</span><span class="p">({</span><span class="s1">&#39;something&#39;</span><span class="p">:</span> <span class="n">Byte</span><span class="p">(</span><span class="mi">5</span><span class="p">)})</span>
<span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Invalid key &#39;something&#39;
</pre></div></div>
</div>
</div>
<div class="section" id="Combining-schemas-and-custom-file-types">
<h2>Combining schemas and custom file types<a class="headerlink" href="#Combining-schemas-and-custom-file-types" title="Permalink to this headline">¶</a></h2>
<p>If you need to deal with files that always have a particular structure, you can create a specialized file type by combining it with a schema. For instance, this is how you would create a file type that opens <a class="reference external" href="https://minecraft.gamepedia.com/Structure_block_file_format">minecraft structure files</a>.</p>
<p>First, we need to define what a minecraft structure is, so we create a schema that matches the tag hierarchy.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">Structure</span> <span class="o">=</span> <span class="n">schema</span><span class="p">(</span><span class="s1">&#39;Structure&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="s1">&#39;DataVersion&#39;</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span>
    <span class="s1">&#39;author&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
    <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Int</span><span class="p">],</span>
    <span class="s1">&#39;palette&#39;</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">schema</span><span class="p">(</span><span class="s1">&#39;State&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s1">&#39;Name&#39;</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
        <span class="s1">&#39;Properties&#39;</span><span class="p">:</span> <span class="n">Compound</span><span class="p">,</span>
    <span class="p">})],</span>
    <span class="s1">&#39;blocks&#39;</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">schema</span><span class="p">(</span><span class="s1">&#39;Block&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span>
        <span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Int</span><span class="p">],</span>
        <span class="s1">&#39;nbt&#39;</span><span class="p">:</span> <span class="n">Compound</span><span class="p">,</span>
    <span class="p">})],</span>
    <span class="s1">&#39;entities&#39;</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">schema</span><span class="p">(</span><span class="s1">&#39;Entity&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Double</span><span class="p">],</span>
        <span class="s1">&#39;blockPos&#39;</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Int</span><span class="p">],</span>
        <span class="s1">&#39;nbt&#39;</span><span class="p">:</span> <span class="n">Compound</span><span class="p">,</span>
    <span class="p">})],</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
<p>Now let’s test our schema by creating a structure. We can see that all the types are automatically applied.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">new_structure</span> <span class="o">=</span> <span class="n">Structure</span><span class="p">({</span>
    <span class="s1">&#39;DataVersion&#39;</span><span class="p">:</span> <span class="mi">1139</span><span class="p">,</span>
    <span class="s1">&#39;author&#39;</span><span class="p">:</span> <span class="s1">&#39;dinnerbone&#39;</span><span class="p">,</span>
    <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="s1">&#39;palette&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;Name&#39;</span><span class="p">:</span> <span class="s1">&#39;minecraft:dirt&#39;</span><span class="p">}</span>
    <span class="p">],</span>
    <span class="s1">&#39;blocks&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
    <span class="p">],</span>
    <span class="s1">&#39;entities&#39;</span><span class="p">:</span> <span class="p">[],</span>
<span class="p">})</span>

<span class="nb">type</span><span class="p">(</span><span class="n">new_structure</span><span class="p">[</span><span class="s1">&#39;blocks&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;pos&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
nbtlib.tag.List[Int]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">type</span><span class="p">(</span><span class="n">new_structure</span><span class="p">[</span><span class="s1">&#39;entities&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
nbtlib.tag.List[Entity]
</pre></div></div>
</div>
<p>Now we can create a custom file type that wraps our structure schema. Since structure files are always gzipped we can override the load method to default the <code class="docutils literal notranslate"><span class="pre">gzipped</span></code> argument to <code class="docutils literal notranslate"><span class="pre">True</span></code>. We also overwrite the constructor so that it can take directly an instance of our structure schema as argument.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">class</span> <span class="nc">StructureFile</span><span class="p">(</span><span class="n">File</span><span class="p">,</span> <span class="n">schema</span><span class="p">(</span><span class="s1">&#39;StructureFileSchema&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="n">Structure</span><span class="p">})):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">structure_data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">({</span><span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="n">structure_data</span> <span class="ow">or</span> <span class="p">{}})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gzipped</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">gzipped</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">gzipped</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>We can now use the custom file type to load, edit and save structure files without having to specify the tags manually.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">structure_file</span> <span class="o">=</span> <span class="n">StructureFile</span><span class="p">(</span><span class="n">new_structure</span><span class="p">)</span>
<span class="n">structure_file</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;nbt_files/new_structure.nbt&#39;</span><span class="p">)</span>  <span class="c1"># you can load it in a minecraft world!</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">FileNotFoundError</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-c7e05417e933&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> structure_file <span class="ansi-blue-fg">=</span> StructureFile<span class="ansi-blue-fg">(</span>new_structure<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">----&gt; 2</span><span class="ansi-red-fg"> </span>structure_file<span class="ansi-blue-fg">.</span>save<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/new_structure.nbt&#39;</span><span class="ansi-blue-fg">)</span>  <span class="ansi-red-fg"># you can load it in a minecraft world!</span>

<span class="ansi-green-fg">~/projects/nbtlib/nbtlib/nbt.py</span> in <span class="ansi-cyan-fg">save</span><span class="ansi-blue-fg">(self, filename, gzipped, byteorder)</span>
<span class="ansi-green-intense-fg ansi-bold">    344</span>
<span class="ansi-green-intense-fg ansi-bold">    345</span>         open_file <span class="ansi-blue-fg">=</span> gzip<span class="ansi-blue-fg">.</span>open <span class="ansi-green-fg">if</span> gzipped <span class="ansi-green-fg">else</span> open
<span class="ansi-green-fg">--&gt; 346</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">with</span> open_file<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;wb&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">as</span> fileobj<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    347</span>             self<span class="ansi-blue-fg">.</span>write<span class="ansi-blue-fg">(</span>fileobj<span class="ansi-blue-fg">,</span> byteorder <span class="ansi-green-fg">or</span> self<span class="ansi-blue-fg">.</span>byteorder<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    348</span>

<span class="ansi-green-fg">/usr/lib/python3.8/gzip.py</span> in <span class="ansi-cyan-fg">open</span><span class="ansi-blue-fg">(filename, mode, compresslevel, encoding, errors, newline)</span>
<span class="ansi-green-intense-fg ansi-bold">     56</span>     gz_mode <span class="ansi-blue-fg">=</span> mode<span class="ansi-blue-fg">.</span>replace<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;t&#34;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;&#34;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     57</span>     <span class="ansi-green-fg">if</span> isinstance<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">(</span>str<span class="ansi-blue-fg">,</span> bytes<span class="ansi-blue-fg">,</span> os<span class="ansi-blue-fg">.</span>PathLike<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 58</span><span class="ansi-red-fg">         </span>binary_file <span class="ansi-blue-fg">=</span> GzipFile<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> gz_mode<span class="ansi-blue-fg">,</span> compresslevel<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     59</span>     <span class="ansi-green-fg">elif</span> hasattr<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;read&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">or</span> hasattr<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;write&#34;</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     60</span>         binary_file <span class="ansi-blue-fg">=</span> GzipFile<span class="ansi-blue-fg">(</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> gz_mode<span class="ansi-blue-fg">,</span> compresslevel<span class="ansi-blue-fg">,</span> filename<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">/usr/lib/python3.8/gzip.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-fg">(self, filename, mode, compresslevel, fileobj, mtime)</span>
<span class="ansi-green-intense-fg ansi-bold">    171</span>             mode <span class="ansi-blue-fg">+=</span> <span class="ansi-blue-fg">&#39;b&#39;</span>
<span class="ansi-green-intense-fg ansi-bold">    172</span>         <span class="ansi-green-fg">if</span> fileobj <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 173</span><span class="ansi-red-fg">             </span>fileobj <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>myfileobj <span class="ansi-blue-fg">=</span> builtins<span class="ansi-blue-fg">.</span>open<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> mode <span class="ansi-green-fg">or</span> <span class="ansi-blue-fg">&#39;rb&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    174</span>         <span class="ansi-green-fg">if</span> filename <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    175</span>             filename <span class="ansi-blue-fg">=</span> getattr<span class="ansi-blue-fg">(</span>fileobj<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;name&#39;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;&#39;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;nbt_files/new_structure.nbt&#39;
</pre></div></div>
</div>
<p>So now let’s try to edit the structure. We’re going to replace all the dirt blocks with stone blocks.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">with</span> <span class="n">StructureFile</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;nbt_files/new_structure.nbt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">structure_file</span><span class="p">:</span>
    <span class="n">structure_file</span><span class="o">.</span><span class="n">root</span><span class="p">[</span><span class="s1">&#39;palette&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;minecraft:stone&#39;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">FileNotFoundError</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-2f448e628955&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">with</span> StructureFile<span class="ansi-blue-fg">.</span>load<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/new_structure.nbt&#39;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">as</span> structure_file<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span>     structure_file<span class="ansi-blue-fg">.</span>root<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;palette&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;Name&#39;</span><span class="ansi-blue-fg">]</span> <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">&#39;minecraft:stone&#39;</span>

<span class="ansi-green-fg">&lt;ipython-input-1-4ee264d6f0ed&gt;</span> in <span class="ansi-cyan-fg">load</span><span class="ansi-blue-fg">(cls, filename, gzipped)</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span>     <span class="ansi-blue-fg">@</span>classmethod
<span class="ansi-green-intense-fg ansi-bold">      6</span>     <span class="ansi-green-fg">def</span> load<span class="ansi-blue-fg">(</span>cls<span class="ansi-blue-fg">,</span> filename<span class="ansi-blue-fg">,</span> gzipped<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">----&gt; 7</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>load<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> gzipped<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/projects/nbtlib/nbtlib/nbt.py</span> in <span class="ansi-cyan-fg">load</span><span class="ansi-blue-fg">(cls, filename, gzipped, byteorder)</span>
<span class="ansi-green-intense-fg ansi-bold">    313</span>         &#34;&#34;&#34;
<span class="ansi-green-intense-fg ansi-bold">    314</span>         open_file <span class="ansi-blue-fg">=</span> gzip<span class="ansi-blue-fg">.</span>open <span class="ansi-green-fg">if</span> gzipped <span class="ansi-green-fg">else</span> open
<span class="ansi-green-fg">--&gt; 315</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">with</span> open_file<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;rb&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">as</span> fileobj<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    316</span>             <span class="ansi-green-fg">return</span> cls<span class="ansi-blue-fg">.</span>from_fileobj<span class="ansi-blue-fg">(</span>fileobj<span class="ansi-blue-fg">,</span> byteorder<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    317</span>

<span class="ansi-green-fg">/usr/lib/python3.8/gzip.py</span> in <span class="ansi-cyan-fg">open</span><span class="ansi-blue-fg">(filename, mode, compresslevel, encoding, errors, newline)</span>
<span class="ansi-green-intense-fg ansi-bold">     56</span>     gz_mode <span class="ansi-blue-fg">=</span> mode<span class="ansi-blue-fg">.</span>replace<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;t&#34;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;&#34;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     57</span>     <span class="ansi-green-fg">if</span> isinstance<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">(</span>str<span class="ansi-blue-fg">,</span> bytes<span class="ansi-blue-fg">,</span> os<span class="ansi-blue-fg">.</span>PathLike<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 58</span><span class="ansi-red-fg">         </span>binary_file <span class="ansi-blue-fg">=</span> GzipFile<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> gz_mode<span class="ansi-blue-fg">,</span> compresslevel<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     59</span>     <span class="ansi-green-fg">elif</span> hasattr<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;read&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">or</span> hasattr<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;write&#34;</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     60</span>         binary_file <span class="ansi-blue-fg">=</span> GzipFile<span class="ansi-blue-fg">(</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> gz_mode<span class="ansi-blue-fg">,</span> compresslevel<span class="ansi-blue-fg">,</span> filename<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">/usr/lib/python3.8/gzip.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-fg">(self, filename, mode, compresslevel, fileobj, mtime)</span>
<span class="ansi-green-intense-fg ansi-bold">    171</span>             mode <span class="ansi-blue-fg">+=</span> <span class="ansi-blue-fg">&#39;b&#39;</span>
<span class="ansi-green-intense-fg ansi-bold">    172</span>         <span class="ansi-green-fg">if</span> fileobj <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 173</span><span class="ansi-red-fg">             </span>fileobj <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>myfileobj <span class="ansi-blue-fg">=</span> builtins<span class="ansi-blue-fg">.</span>open<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> mode <span class="ansi-green-fg">or</span> <span class="ansi-blue-fg">&#39;rb&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    174</span>         <span class="ansi-green-fg">if</span> filename <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    175</span>             filename <span class="ansi-blue-fg">=</span> getattr<span class="ansi-blue-fg">(</span>fileobj<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;name&#39;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;&#39;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;nbt_files/new_structure.nbt&#39;
</pre></div></div>
</div>
<p>As you can see we didn’t need to specify any tag to edit the file.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">serialize_tag</span><span class="p">(</span><span class="n">StructureFile</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;nbt_files/new_structure.nbt&#39;</span><span class="p">),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">FileNotFoundError</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-26a17542dc4d&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>print<span class="ansi-blue-fg">(</span>serialize_tag<span class="ansi-blue-fg">(</span>StructureFile<span class="ansi-blue-fg">.</span>load<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nbt_files/new_structure.nbt&#39;</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span> indent<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">4</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-1-4ee264d6f0ed&gt;</span> in <span class="ansi-cyan-fg">load</span><span class="ansi-blue-fg">(cls, filename, gzipped)</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span>     <span class="ansi-blue-fg">@</span>classmethod
<span class="ansi-green-intense-fg ansi-bold">      6</span>     <span class="ansi-green-fg">def</span> load<span class="ansi-blue-fg">(</span>cls<span class="ansi-blue-fg">,</span> filename<span class="ansi-blue-fg">,</span> gzipped<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">----&gt; 7</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>load<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> gzipped<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/projects/nbtlib/nbtlib/nbt.py</span> in <span class="ansi-cyan-fg">load</span><span class="ansi-blue-fg">(cls, filename, gzipped, byteorder)</span>
<span class="ansi-green-intense-fg ansi-bold">    313</span>         &#34;&#34;&#34;
<span class="ansi-green-intense-fg ansi-bold">    314</span>         open_file <span class="ansi-blue-fg">=</span> gzip<span class="ansi-blue-fg">.</span>open <span class="ansi-green-fg">if</span> gzipped <span class="ansi-green-fg">else</span> open
<span class="ansi-green-fg">--&gt; 315</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">with</span> open_file<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;rb&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">as</span> fileobj<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    316</span>             <span class="ansi-green-fg">return</span> cls<span class="ansi-blue-fg">.</span>from_fileobj<span class="ansi-blue-fg">(</span>fileobj<span class="ansi-blue-fg">,</span> byteorder<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    317</span>

<span class="ansi-green-fg">/usr/lib/python3.8/gzip.py</span> in <span class="ansi-cyan-fg">open</span><span class="ansi-blue-fg">(filename, mode, compresslevel, encoding, errors, newline)</span>
<span class="ansi-green-intense-fg ansi-bold">     56</span>     gz_mode <span class="ansi-blue-fg">=</span> mode<span class="ansi-blue-fg">.</span>replace<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;t&#34;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;&#34;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     57</span>     <span class="ansi-green-fg">if</span> isinstance<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">(</span>str<span class="ansi-blue-fg">,</span> bytes<span class="ansi-blue-fg">,</span> os<span class="ansi-blue-fg">.</span>PathLike<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">---&gt; 58</span><span class="ansi-red-fg">         </span>binary_file <span class="ansi-blue-fg">=</span> GzipFile<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> gz_mode<span class="ansi-blue-fg">,</span> compresslevel<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     59</span>     <span class="ansi-green-fg">elif</span> hasattr<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;read&#34;</span><span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">or</span> hasattr<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;write&#34;</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     60</span>         binary_file <span class="ansi-blue-fg">=</span> GzipFile<span class="ansi-blue-fg">(</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span> gz_mode<span class="ansi-blue-fg">,</span> compresslevel<span class="ansi-blue-fg">,</span> filename<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">/usr/lib/python3.8/gzip.py</span> in <span class="ansi-cyan-fg">__init__</span><span class="ansi-blue-fg">(self, filename, mode, compresslevel, fileobj, mtime)</span>
<span class="ansi-green-intense-fg ansi-bold">    171</span>             mode <span class="ansi-blue-fg">+=</span> <span class="ansi-blue-fg">&#39;b&#39;</span>
<span class="ansi-green-intense-fg ansi-bold">    172</span>         <span class="ansi-green-fg">if</span> fileobj <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 173</span><span class="ansi-red-fg">             </span>fileobj <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>myfileobj <span class="ansi-blue-fg">=</span> builtins<span class="ansi-blue-fg">.</span>open<span class="ansi-blue-fg">(</span>filename<span class="ansi-blue-fg">,</span> mode <span class="ansi-green-fg">or</span> <span class="ansi-blue-fg">&#39;rb&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    174</span>         <span class="ansi-green-fg">if</span> filename <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    175</span>             filename <span class="ansi-blue-fg">=</span> getattr<span class="ansi-blue-fg">(</span>fileobj<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;name&#39;</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39;&#39;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;nbt_files/new_structure.nbt&#39;
</pre></div></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Valentin Berlier

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>